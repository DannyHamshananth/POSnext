generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model ProductCategory {
  id      Int       @id @default(autoincrement())
  name    String
  product Product[]

  @@map("product_categories")
}

model Product {
  id                 Int              @id @default(autoincrement())
  name               String
  photo              String?
  description        String?
  suggestedUnitPrice Int?
  unitPrice          Int
  productCategoryId  Int?
  productCategory    ProductCategory? @relation(fields: [productCategoryId], references: [id])
  saleLine           SaleLine[]

  @@map("products")
}

model Sale {
  id           Int         @id @default(autoincrement())
  invoicenum   Int
  saleLine     SaleLine[]
  subTotal     Int
  saleDate     DateTime    @default(now())
  discount     Int         @default(0)
  total        Int

  @@map("sales")
}

model SaleLine {
  sale          Sale   @relation(fields: [saleId], references: [id])
  saleId        Int
  product       Product @relation(fields: [productId], references: [id])
  productId     Int

  @@id([saleId, productId])
  @@map("sale_lines")
}
